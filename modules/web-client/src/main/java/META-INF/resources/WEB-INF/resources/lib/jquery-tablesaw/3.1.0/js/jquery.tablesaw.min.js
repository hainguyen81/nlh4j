/*! Tablesaw - v3.1.0 - 2018-12-10
* https://github.com/filamentgroup/tablesaw
* Copyright (c) 2018 Filament Group; Licensed MIT */ !function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(a){return e.Tablesaw=t(a,e)}):"object"==typeof exports?"document"in e?module.exports=t(require("jquery"),e):module.exports=t(require("jquery")(e),e):e.Tablesaw=t(jQuery,e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var a=t.document,s=/complete|loaded/.test(a.readyState);a.addEventListener("DOMContentLoaded",function(){s=!0});var n,i,o,l,r,c,h,d,u,b,p,f,g,w,v,m,C,y,$,k,T={i18n:{modeStack:"Stack",modeSwipe:"Swipe",modeToggle:"Toggle",modeSwitchColumnsAbbreviated:"Cols",modeSwitchColumns:"Columns",columnToggleButton:"Columns",columnToggleError:"No eligible columns.",sort:"Sort",swipePreviousColumn:"Previous column",swipeNextColumn:"Next column"},mustard:"head"in a&&(!t.blackberry||t.WebKitPoint)&&!t.operamini,$:e,_init:function(e){T.$(e||a).trigger("enhance.tablesaw")},init:function(e){(s=s||/complete|loaded/.test(a.readyState))?T._init(e):"addEventListener"in a&&a.addEventListener("DOMContentLoaded",function(){T._init(e)})}};return e(a).on("enhance.tablesaw",function(){"undefined"!=typeof TablesawConfig&&TablesawConfig.i18n&&(T.i18n=e.extend(T.i18n,TablesawConfig.i18n||{})),T.i18n.modes=[T.i18n.modeStack,T.i18n.modeSwipe,T.i18n.modeToggle]}),T.mustard&&e(a.documentElement).addClass("tablesaw-enhanced"),o="tablesaw",l={toolbar:"tablesaw-bar"},r={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},c={},T.events=r,(h=function(t){if(!t)throw Error("Tablesaw requires an element.");this.table=t,this.$table=e(t),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||"stack",this.$toolbar=null,this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow"},this.init()}).prototype.init=function(){if(!this.$thead.length)throw Error("tablesaw: a <thead> is required, but none was found.");if(!this.$thead.find("th").length)throw Error("tablesaw: no header cells found. Are you using <th> inside of <thead>?");this.$table.attr("id")||this.$table.attr("id",o+"-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data(o,this),this.$table.trigger(r.create,[this])},h.prototype.getConfig=function(t){var a=e.extend(c,t||{});return e.extend(a,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},h.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)},h.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter(function(){return!e(this).is("[data-tablesaw-ignorerow]")})},h.prototype._getRowIndex=function(e){return e.prevAll().length},h.prototype._getHeaderRowIndeces=function(){var t=this,a=[];return this._getHeaderRows().each(function(){a.push(t._getRowIndex(e(this)))}),a},h.prototype._getPrimaryHeaderCells=function(e){return(e||this._getPrimaryHeaderRow()).find("th")},h.prototype._$getCells=function(t){var a=this;return e(t).add(t.cells).filter(function(){var t=e(this),s=t.parent(),n=t.is("[colspan]");return!s.is("["+a.attributes.subrow+"]")&&(!s.is("["+a.attributes.ignorerow+"]")||!n)})},h.prototype._getVisibleColspan=function(){var t=0;return this._getPrimaryHeaderCells().each(function(){var a=e(this);"none"!==a.css("display")&&(t+=parseInt(a.attr("colspan"),10)||1)}),t},h.prototype.getColspanForCell=function(t){var a=this._getVisibleColspan(),s=0;return t.closest("tr").data("tablesaw-rowspanned")&&s++,t.siblings().each(function(){var t=e(this),a=parseInt(t.attr("colspan"),10)||1;"none"!==t.css("display")&&(s+=a)}),a-s},h.prototype.isCellInColumn=function(t,a){return e(t).add(t.cells).filter(function(){return this===a}).length},h.prototype.updateColspanCells=function(t,a,s){var n=this,i=n._getPrimaryHeaderRow();this.$table.find("[rowspan][data-tablesaw-priority]").each(function(){var t=e(this);if("persist"===t.attr("data-tablesaw-priority")){var a=t.closest("tr"),s=parseInt(t.attr("rowspan"),10);s>1&&((a=a.next()).data("tablesaw-rowspanned",!0),s--)}}),this.$table.find("[colspan],[data-tablesaw-maxcolspan]").filter(function(){return e(this).closest("tr")[0]!==i[0]}).each(function(){var i=e(this);if(void 0===s||n.isCellInColumn(a,this)){var o=n.getColspanForCell(i);t&&void 0!==s&&i[0===o?"addClass":"removeClass"](t);var l=parseInt(i.attr("data-tablesaw-maxcolspan"),10);l?o>l&&(o=l):i.attr("data-tablesaw-maxcolspan",i.attr("colspan")),i.attr("colspan",o)}})},h.prototype._findPrimaryHeadersForCell=function(e){for(var t=this._getPrimaryHeaderRow(),a=this._getRowIndex(t),s=[],n=0;n<this.headerMapping.length;n++)if(n!==a)for(var i=0;i<this.headerMapping[n].length;i++)this.headerMapping[n][i]===e&&s.push(this.headerMapping[a][i]);return s},h.prototype.getRows=function(){var t=this;return this.$table.find("tr").filter(function(){return e(this).closest("table").is(t.$table)})},h.prototype.getBodyRows=function(t){return(t?e(t):this.$tbody).children().filter("tr")},h.prototype.getHeaderCellIndex=function(e){for(var t=this.headerMapping[0],a=0;a<t.length;a++)if(t[a]===e)return a;return -1},h.prototype._initCells=function(){this.$table.find("[data-tablesaw-maxcolspan]").each(function(){var t=e(this);t.attr("colspan",t.attr("data-tablesaw-maxcolspan"))});var t=this.getRows(),a=[];t.each(function(e){a[e]=[]}),t.each(function(t){var s=0;e(this).children().each(function(){for(var e=parseInt(this.getAttribute("data-tablesaw-maxcolspan")||this.getAttribute("colspan"),10),n=parseInt(this.getAttribute("rowspan"),10);a[t][s];)s++;if(a[t][s]=this,e)for(var i=0;i<e-1;i++)s++,a[t][s]=this;if(n)for(var o=1;o<n;o++)a[t+o][s]=this;s++})});for(var s=this._getHeaderRowIndeces(),n=0;n<a[0].length;n++)for(var i=0,o=s.length;i<o;i++){var l,r=a[s[i]][n],c=s[i];for(r.cells||(r.cells=[]);c<a.length;)r!==(l=a[c][n])&&r.cells.push(l),c++}this.headerMapping=a},h.prototype.refresh=function(){this._initCells(),this.$table.trigger(r.refresh,[this])},h.prototype._getToolbarAnchor=function(){var e=this.$table.parent();return e.is(".tablesaw-overflow")?e:this.$table},h.prototype._getToolbar=function(e){return e||(e=this._getToolbarAnchor()),e.prev().filter("."+l.toolbar)},h.prototype.createToolbar=function(){var t=this._getToolbarAnchor(),a=this._getToolbar(t);a.length||(a=e("<div>").addClass(l.toolbar).insertBefore(t)),this.$toolbar=a,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},h.prototype.destroy=function(){this._getToolbar().each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var s=this.$table.attr("id");e(a).off("."+s),e(t).off("."+s),this.$table.trigger(r.destroy,[this]),this.$table.removeData(o)},e.fn[o]=function(){return this.each(function(){!e(this).data(o)&&new h(this)})},(d=e(a)).on("enhance.tablesaw",function(t){if(T.mustard){var a=e(t.target);a.parent().length&&(a=a.parent()),a.find("table").filter("[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]")[o]()}}),u=!1,d.on("scroll.tablesaw",function(){u=!0,t.clearTimeout(n),n=t.setTimeout(function(){u=!1},300)}),e(t).on("resize",function(){u||(t.clearTimeout(i),i=t.setTimeout(function(){d.trigger(r.resize)},150))}),T.Table=h,b={stackTable:"tablesaw-stack",cellLabels:"tablesaw-cell-label",cellContentLabels:"tablesaw-cell-content"},p={key:"tablesaw-stack"},f={labelless:"data-tablesaw-no-labels",hideempty:"data-tablesaw-hide-empty"},(g=function(t,a){this.tablesaw=a,this.$table=e(t),this.labelless=this.$table.is("["+f.labelless+"]"),this.hideempty=this.$table.is("["+f.hideempty+"]"),this.$table.data(p.key,this)}).prototype.init=function(){if(this.$table.addClass(b.stackTable),!this.labelless){var t=this;this.$table.find("th, td").filter(function(){return!e(this).closest("thead").length}).filter(function(){return!e(this).is("["+f.labelless+"]")&&!e(this).closest("tr").is("["+f.labelless+"]")&&(!t.hideempty||!!e(this).html())}).each(function(){var s=e(a.createElement("b")).addClass(b.cellLabels),n=e(this);e(t.tablesaw._findPrimaryHeadersForCell(this)).each(function(t){var n,i=e(this.cloneNode(!0)),o=i.find(".tablesaw-sortable-btn");i.find(".tablesaw-sortable-arrow").remove();var l=i.find("[data-tablesaw-checkall]");if(l.closest("label").remove(),l.length){s=e([]);return}t>0&&s.append(a.createTextNode(", "));for(var r=o.length?o[0]:i[0];n=r.firstChild;)s[0].appendChild(n)}),s.length&&!n.find("."+b.cellContentLabels).length&&n.wrapInner("<span class='"+b.cellContentLabels+"'></span>");var i=n.find("."+b.cellLabels);i.length?i.replaceWith(s):(n.prepend(a.createTextNode(" ")),n.prepend(s))})}},g.prototype.destroy=function(){this.$table.removeClass(b.stackTable),this.$table.find("."+b.cellLabels).remove(),this.$table.find("."+b.cellContentLabels).each(function(){e(this).replaceWith(e(this.childNodes))})},e(a).on(T.events.create,function(e,t){"stack"===t.mode&&new g(t.table,t).init()}).on(T.events.refresh,function(t,a){"stack"===a.mode&&e(a.table).data(p.key).init()}).on(T.events.destroy,function(t,a){"stack"===a.mode&&e(a.table).data(p.key).destroy()}),T.Stack=g,w="tablesawbtn",e.fn[w]=function(t,a,s,n){return this.each(function(){return t&&"string"==typeof t?e.fn[w].prototype[t].call(this,a,s,n):e(this).data(w+"active")?e(this):void(e(this).data(w+"active",!0),e.fn[w].prototype._create.call(this))})},e.extend(e.fn[w].prototype,{_create:function(){return e(this).each(function(){e(this).trigger("beforecreate."+w)[w]("_init").trigger("create."+w)})},_init:function(){var t=e(this),a=this.getElementsByTagName("select")[0];return a&&e(this).addClass("btn-select tablesaw-btn-select")[w]("_select",a),t},_select:function(t){var s=function(t,s){var n,i,o=e(s).find("option"),l=a.createElement("span"),r=!1;if(l.setAttribute("aria-hidden","true"),l.innerHTML="&#160;",o.each(function(){this.selected&&(l.innerHTML=this.text)}),i=t.childNodes,o.length>0){for(var c=0,h=i.length;c<h;c++)(n=i[c])&&"SPAN"===n.nodeName.toUpperCase()&&(t.replaceChild(l,n),r=!0);r||t.insertBefore(l,t.firstChild)}};s(this,t),e(this).on("change refresh",function(){s(this,t)})}}),v={key:"tablesaw-coltoggle"},(m=function(t){this.$table=e(t),this.$table.length&&(this.tablesaw=this.$table.data("tablesaw"),this.attributes={btnTarget:"data-tablesaw-columntoggle-btn-target",set:"data-tablesaw-columntoggle-set"},this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-"},this.set=[],this.$headers=this.tablesaw._getPrimaryHeaderCells(),this.$table.data(v.key,this))}).prototype.initSet=function(){var t=this.$table.attr(this.attributes.set);if(t){var a=this.$table[0];this.set=e("table["+this.attributes.set+"='"+t+"']").filter(function(){return this!==a}).get()}},m.prototype.init=function(){if(this.$table.length){var s,n,i,o,l,r,c,h,d=this,u=this.tablesaw.getConfig({getColumnToggleLabelTemplate:function(e){return"<label><input type='checkbox' checked>"+e+"</label>"}});this.$table.addClass(this.classes.columnToggleTable),o=(i=this.$table.attr("id"))+"-popup",h=e("<div class='"+this.classes.columnBtnContain+"'></div>"),l=e("<a href='#"+o+"' class='btn tablesaw-btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+T.i18n.columnToggleButton+"</span></a>"),r=e("<div class='"+this.classes.popup+"' id='"+o+"'></div>"),c=e("<div class='tablesaw-btn-group'></div>"),this.$popup=r;var b=!1;this.$headers.each(function(){var t=e(this),a=t.attr("data-tablesaw-priority"),s=d.tablesaw._$getCells(this);a&&"persist"!==a&&(s.addClass(d.classes.priorityPrefix+a),e(u.getColumnToggleLabelTemplate(t.text())).appendTo(c).find('input[type="checkbox"]').data("tablesaw-header",this),b=!0)}),b||c.append("<label>"+T.i18n.columnToggleError+"</label>"),c.appendTo(r),c.find('input[type="checkbox"]').on("change",function(t){if(g(t.target),d.set.length){var a;e(d.$popup).find("input[type='checkbox']").each(function(e){if(this===t.target)return a=e,!1}),e(d.set).each(function(){var s=e(this).data(v.key).$popup.find("input[type='checkbox']").get(a);s&&(s.checked=t.target.checked,g(s))})}}),l.appendTo(h);var p=e(this.$table.attr(this.attributes.btnTarget));h.appendTo(p.length?p:this.tablesaw.$toolbar),l.on("click.tablesaw",function(n){n.preventDefault(),h.is(".visible")?w():(h.addClass("visible"),l.removeClass("down").addClass("up"),e(a).off("click."+i,w),t.clearTimeout(s),s=t.setTimeout(function(){e(a).on("click."+i,w)},15))}),r.appendTo(h),this.$menu=c;var f=this.$table.closest(".tablesaw-overflow");f.css("-webkit-overflow-scrolling")&&f.on("scroll",function(){var a=e(this);t.clearTimeout(n),n=t.setTimeout(function(){a.css("-webkit-overflow-scrolling","auto"),t.setTimeout(function(){a.css("-webkit-overflow-scrolling","touch")},0)},100)}),e(t).on(T.events.resize+"."+i,function(){d.refreshToggle()}),this.initSet(),this.refreshToggle()}function g(e){var t=e.checked,a=d.getHeaderFromCheckbox(e),s=d.tablesaw._$getCells(a);s[t?"removeClass":"addClass"]("tablesaw-toggle-cellhidden"),s[t?"addClass":"removeClass"]("tablesaw-toggle-cellvisible"),d.updateColspanCells(a,t),d.$table.trigger("tablesawcolumns")}function w(t){(!t||!e(t.target).closest("."+d.classes.popup).length)&&(e(a).off("click."+i),l.removeClass("up").addClass("down"),h.removeClass("visible"))}},m.prototype.getHeaderFromCheckbox=function(t){return e(t).data("tablesaw-header")},m.prototype.refreshToggle=function(){var e=this;this.$menu.find("input").each(function(){var t=e.getHeaderFromCheckbox(this);this.checked="table-cell"===e.tablesaw._$getCells(t).eq(0).css("display")}),this.updateColspanCells()},m.prototype.updateColspanCells=function(e,t){this.tablesaw.updateColspanCells("tablesaw-toggle-cellhidden",e,t)},m.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){e(this).removeClass("tablesaw-toggle-cellhidden").removeClass("tablesaw-toggle-cellvisible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},e(a).on(T.events.create,function(e,t){"columntoggle"===t.mode&&new m(t.table).init()}),e(a).on(T.events.destroy,function(t,a){"columntoggle"===a.mode&&e(a.table).data(v.key).destroy()}),e(a).on(T.events.refresh,function(t,a){"columntoggle"===a.mode&&e(a.table).data(v.key).refreshToggle()}),T.ColumnToggle=m,!function(){function t(t){var a=[];return e(t.childNodes).each(function(){var t=e(this);t.is("input, select")?a.push(t.val()):t.is(".tablesaw-cell-label")||a.push((t.text()||"").replace(/^\s+|\s+$/g,""))}),a.join("")}var s="tablesaw-sortable",n="table[data-"+s+"]",i="[data-"+s+"-switch]",o={sortCol:"data-tablesaw-sortable-col",defaultCol:"data-tablesaw-sortable-default-col",numericCol:"data-tablesaw-sortable-numeric",subRow:"data-tablesaw-subrow",ignoreRow:"data-tablesaw-ignorerow"},l={head:s+"-head",ascend:s+"-ascending",descend:s+"-descending",switcher:s+"-switch",tableToolbar:"tablesaw-bar-section",sortButton:s+"-btn"};e.fn[s]=function(t){var a,n=Array.prototype.slice.call(arguments,1);return t&&"string"==typeof t?void 0!==(a=e.fn[s].prototype[t].apply(this[0],n))?a:e(this):(e(this).data(s+"-active")||(e(this).data(s+"-active",!0),e.fn[s].prototype._create.call(this,t)),e(this))},e.extend(e.fn[s].prototype,{_create:function(t){return e(this).each(function(){if(e(this).data(s+"-init"))return!1;e(this).data(s+"-init",!0).trigger("beforecreate."+s)[s]("_init",t).trigger("create."+s)})},_init:function(){var a,n,r,c,h,d,u,b,p,f=e(this),g=f.data("tablesaw");function w(t){e.each(t,function(t,a){var s=e(a);s.removeAttr(o.defaultCol),s.removeClass(l.ascend),s.removeClass(l.descend)})}f.addClass(s),a=b=f.children().filter("thead").find("th["+o.sortCol+"]"),e.each(a,function(t,a){e(a).addClass(l.head)}),n=b,r=function t(a){if(!e(a.target).is("a[href]")){a.stopPropagation();var n=e(a.target).closest("["+o.sortCol+"]"),i=a.data.col,r=b.index(n[0]);w(n.closest("thead").find("th").filter(function(){return this!==n[0]})),n.is("."+l.descend)||!n.is("."+l.ascend)?(f[s]("sortBy",i,!0),r+="_asc"):(f[s]("sortBy",i),r+="_desc"),p&&p.find("select").val(r).trigger("refresh"),a.preventDefault()}},e.each(n,function(t,a){var s=e("<button class='"+l.sortButton+"'/>");s.on("click",{col:a},r),e(a).wrapInner(s).find("button").append("<span class='tablesaw-sortable-arrow'>")}),c=b,e.each(c,function(t,a){var s=e(a);s.is("["+o.defaultCol+"]")&&!s.is("."+l.descend)&&s.addClass(l.ascend)}),f.is(i)&&(h=b,p=e("<div>").addClass(l.switcher).addClass(l.tableToolbar),(d=["<label>"+T.i18n.sort+":"]).push('<span class="btn tablesaw-btn"><select>'),h.each(function(a){var s=e(this),n=s.is("["+o.defaultCol+"]"),i=s.is("."+l.descend),r=s.is("["+o.numericCol+"]"),c=0;e(this.cells.slice(0,5)).each(function(){!isNaN(parseInt(t(this),10))&&c++});var h=5===c;r||s.attr(o.numericCol,h?"":"false"),d.push("<option"+(n&&!i?" selected":"")+' value="'+a+'_asc">'+s.text()+" "+(h?"&#x2191;":"(A-Z)")+"</option>"),d.push("<option"+(n&&i?" selected":"")+' value="'+a+'_desc">'+s.text()+" "+(h?"&#x2193;":"(Z-A)")+"</option>")}),d.push("</select></span></label>"),p.html(d.join("")),(u=g.$toolbar.children().eq(0)).length?p.insertBefore(u):p.appendTo(g.$toolbar),p.find(".tablesaw-btn").tablesawbtn(),p.find("select").on("change",function(){var t=e(this).val().split("_"),a=h.eq(t[0]);w(a.siblings()),f[s]("sortBy",a.get(0),"asc"===t[1])}))},sortRows:function(a,s,n,i,l){var r,c,h,d,u,b,p,f,g,w=(r=i.cells,c=l,h=[],e.each(r,function(a,s){for(var n=s.parentNode,i=e(n),l=[],r=i.next();r.is("["+o.subRow+"]");)l.push(r[0]),r=r.next();var d=n.parentNode;i.is("["+o.subRow+"]")||d===c&&h.push({element:s,cell:t(s),row:n,subrows:l.length?l:null,ignored:i.is("["+o.ignoreRow+"]")})}),h),v=e(i).data("tablesaw-sort");return d=!!v&&"function"==typeof v&&v(n)||(b=n,p=e(i).is("["+o.numericCol+"]")&&!e(i).is("["+o.numericCol+'="false"]'),g=/[^\-\+\d\.]/g,f=b?function(e,t){return e.ignored||t.ignored?0:p?parseFloat(e.cell.replace(g,""))-parseFloat(t.cell.replace(g,"")):e.cell.toLowerCase()>t.cell.toLowerCase()?1:-1}:function(e,t){return e.ignored||t.ignored?0:p?parseFloat(t.cell.replace(g,""))-parseFloat(e.cell.replace(g,"")):e.cell.toLowerCase()<t.cell.toLowerCase()?1:-1}),a=function e(t){var a,s,n=[];for(a=0,s=t.length;a<s;a++)n.push(t[a].row),t[a].subrows&&n.push(t[a].subrows);return n}(u=w.sort(d))},makeColDefault:function(t,a){var s=e(t);s.attr(o.defaultCol,"true"),a?(s.removeClass(l.descend),s.addClass(l.ascend)):(s.removeClass(l.ascend),s.addClass(l.descend))},sortBy:function(t,a){var n,i=e(this),o=i.data("tablesaw");o.$tbody.each(function(){var l,r,c,h=e(this),d=o.getBodyRows(this),u=o.headerMapping[0];for(r=0,c=u.length;r<c;r++)if(u[r]===t){n=r;break}for(r=0,c=(l=i[s]("sortRows",d,n,a,t,this)).length;r<c;r++)h.append(l[r])}),i[s]("makeColDefault",t,a),i.trigger("tablesaw-sorted")}}),e(a).on(T.events.create,function(e,t){t.$table.is(n)&&t.$table[s]()})}(),C={hideBtn:"disabled",persistWidths:"tablesaw-fix-persist",hiddenCol:"tablesaw-swipe-cellhidden",persistCol:"tablesaw-swipe-cellpersist",allColumnsVisible:"tablesaw-all-cols-visible"},y={disableTouchEvents:"data-tablesaw-no-touch",ignorerow:"data-tablesaw-ignorerow",subrow:"data-tablesaw-subrow"},e(a).on(T.events.create,function(s,n){"swipe"===n.mode&&function s(n,i){var o=i.data("tablesaw"),l=e("<div class='tablesaw-advance'></div>"),r=e("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro left'>"+T.i18n.swipePreviousColumn+"</a>").appendTo(l),c=e("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro right'>"+T.i18n.swipeNextColumn+"</a>").appendTo(l),h=n._getPrimaryHeaderCells(),d=h.not('[data-tablesaw-priority="persist"]'),u=[],b=e(a.head||"head"),p=i.attr("id");if(!h.length)throw Error("tablesaw swipe: no header cells found.");function f(){i.css({width:"1px"}),i.find("."+C.hiddenCol).removeClass(C.hiddenCol),u=[],h.each(function(){u.push(this.offsetWidth)}),i.css({width:""})}function g(e){o._$getCells(e).removeClass(C.hiddenCol)}function w(e){o._$getCells(e).addClass(C.hiddenCol)}function v(){i.removeClass(C.persistWidths),e("#"+p+"-persist").remove()}function m(){var t,a=[];return d.each(function(s){var n=e(this),i="none"===n.css("display")||n.is("."+C.hiddenCol);if(i||t){if(i&&t)return a[1]=s,!1}else t=!0,a[0]=s}),a}function $(){var e=m();return[e[1]-1,e[0]-1]}function k(e){return e[1]>-1&&e[1]<d.length}function _(){if(!(a=i.attr("data-tablesaw-swipe-media"))||"matchMedia"in t&&t.matchMedia(a).matches){var a,s=i.parent().width(),n=[],l=0,r=[],c=h.length;h.each(function(t){var a=e(this).is('[data-tablesaw-priority="persist"]');n.push(a),l+=u[t],r.push(l),(a||l>s)&&c--});var d=0===c;h.each(function(e){r[e]>s&&w(this)}),h.each(function(e){if(n[e]){!function e(t){o._$getCells(t).addClass(C.persistCol)}(this);return}(r[e]<=s||d)&&(d=!1,g(this),o.updateColspanCells(C.hiddenCol,this,!0))}),v(),i.trigger("tablesawcolumns")}}function x(t){var a,s=(a=t)?m():$();k(s)&&(isNaN(s[0])&&(t?s[0]=0:s[0]=d.length-1),function t(){var a,s="#"+p+".tablesaw-swipe ",n=[],o=i.width(),l=[];if(h.each(function(t){var a,i;i=this,e(i).is('[data-tablesaw-priority="persist"]')&&(a=this.offsetWidth)<.75*o&&(l.push(t+"-"+a),n.push(s+" ."+C.persistCol+":nth-child("+(t+1)+") { width: "+a+"px; }"))}),a=l.join("_"),n.length){i.addClass(C.persistWidths);var r=e("#"+p+"-persist");r.length&&r.data("tablesaw-hash")===a||(r.remove(),e("<style>"+n.join("\n")+"</style>").attr("id",p+"-persist").data("tablesaw-hash",a).appendTo(b))}}(),w(d.get(s[0])),o.updateColspanCells(C.hiddenCol,d.get(s[0]),!1),g(d.get(s[1])),o.updateColspanCells(C.hiddenCol,d.get(s[1]),!0),i.trigger("tablesawcolumns"))}function S(e,t){return(e.touches||e.originalEvent.touches)[0][t]}i.addClass("tablesaw-swipe"),f(),l.appendTo(o.$toolbar),p||(p="tableswipe-"+Math.round(1e4*Math.random()),i.attr("id",p)),r.add(c).on("click",function(t){x(!!e(t.target).closest(c).length),t.preventDefault()}),i.is("["+y.disableTouchEvents+"]")||i.on("touchstart.swipetoggle",function(a){var s,i,o=S(a,"pageX"),l=S(a,"pageY"),r=t.pageYOffset;e(t).off(T.events.resize,_),e(this).on("touchmove.swipetoggle",function(e){s=S(e,"pageX"),i=S(e,"pageY")}).on("touchend.swipetoggle",function(){var a=n.getConfig({swipeHorizontalThreshold:30,swipeVerticalThreshold:30}),c=a.swipe?a.swipe.verticalThreshold:a.swipeVerticalThreshold,h=a.swipe?a.swipe.horizontalThreshold:a.swipeHorizontalThreshold,d=Math.abs(t.pageYOffset-r)>=c;Math.abs(i-l)>=c||d||(s-o<-1*h&&x(!0),s-o>h&&x(!1)),t.setTimeout(function(){e(t).on(T.events.resize,_)},300),e(this).off("touchmove.swipetoggle touchend.swipetoggle")})}),i.on("tablesawcolumns.swipetoggle",function(){var e=k($()),t=k(m());r[e?"removeClass":"addClass"](C.hideBtn),c[t?"removeClass":"addClass"](C.hideBtn),o.$toolbar[e||t?"removeClass":"addClass"](C.allColumnsVisible)}).on("tablesawnext.swipetoggle",function(){x(!0)}).on("tablesawprev.swipetoggle",function(){x(!1)}).on(T.events.destroy+".swipetoggle",function(){var a=e(this);a.removeClass("tablesaw-swipe"),o.$toolbar.find(".tablesaw-advance").remove(),e(t).off(T.events.resize,_),a.off(".swipetoggle")}).on(T.events.refresh,function(){v(),f(),_()}),_(),e(t).on(T.events.resize,_)}(n,n.$table)}),$={attr:{init:"data-tablesaw-minimap"},show:function(e){var a=e.getAttribute($.attr.init);return""===a||!!a&&"matchMedia"in t&&t.matchMedia(a).matches}},e(a).on(T.events.create,function(a,s){("swipe"===s.mode||"columntoggle"===s.mode)&&s.$table.is("[ "+$.attr.init+"]")&&function a(s){var n=s.data("tablesaw"),i=e('<div class="tablesaw-advance minimap">'),o=e('<ul class="tablesaw-advance-dots">').appendTo(i),l="tablesaw-advance-dots-hide";function r(){if(!$.show(s[0])){i.css("display","none");return}i.css("display","block");var t=o.find("li").removeClass(l);s.find("thead th").each(function(a){"none"===e(this).css("display")&&t.eq(a).addClass(l)})}s.data("tablesaw")._getPrimaryHeaderCells().each(function(){o.append("<li><i></i></li>")}),i.appendTo(n.$toolbar),r(),e(t).on(T.events.resize,r),s.on("tablesawcolumns.minimap",function(){r()}).on(T.events.destroy+".minimap",function(){var a=e(this);n.$toolbar.find(".tablesaw-advance").remove(),e(t).off(T.events.resize,r),a.off(".minimap")})}(s.$table)}),T.MiniMap=$,k={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-bar-section"},modes:["stack","swipe","columntoggle"],init:function(t){var a,s=e(t),n=s.data("tablesaw"),i=s.attr(k.attributes.excludeMode),o=n.$toolbar,l=e("<div>").addClass(k.classes.main+" "+k.classes.toolbar),r=['<label><span class="abbreviated">'+T.i18n.modeSwitchColumnsAbbreviated+'</span><span class="longform">'+T.i18n.modeSwitchColumns+"</span>:"],c=s.attr("data-tablesaw-mode");r.push('<span class="btn tablesaw-btn"><select>');for(var h=0,d=k.modes.length;h<d;h++)(!i||i.toLowerCase()!==k.modes[h])&&(a=c===k.modes[h],r.push("<option"+(a?" selected":"")+' value="'+k.modes[h]+'">'+T.i18n.modes[h]+"</option>"));r.push("</select></span></label>"),l.html(r.join(""));var u=o.find(".tablesaw-advance").eq(0);u.length?l.insertBefore(u):l.appendTo(o),l.find(".tablesaw-btn").tablesawbtn(),l.find("select").on("change",function(a){return k.onModeChange.call(t,a,e(this).val())})},onModeChange:function(t,a){var s=e(this),n=s.data("tablesaw");n.$toolbar.find("."+k.classes.main).remove(),n.destroy(),s.attr("data-tablesaw-mode",a),s.tablesaw()}},e(a).on(T.events.create,function(e,t){t.$table.is(k.selectors.init)&&k.init(t.table)}),!function(){var t="tablesawCheckAll";function s(e){this.tablesaw=e,this.$table=e.$table,this.attr="data-tablesaw-checkall",this.checkAllSelector="["+this.attr+"]",this.forceCheckedSelector="["+this.attr+"-checked]",this.forceUncheckedSelector="["+this.attr+"-unchecked]",this.checkboxSelector='input[type="checkbox"]',this.$triggers=null,this.$checkboxes=null,!this.$table.data(t)&&(this.$table.data(t,this),this.init())}s.prototype._filterCells=function(t){return t.filter(function(){return!e(this).closest("tr").is("[data-tablesaw-subrow],[data-tablesaw-ignorerow]")}).find(this.checkboxSelector).not(this.checkAllSelector)},s.prototype.getCheckboxesForButton=function(t){return this._filterCells(e(e(t).attr(this.attr)))},s.prototype.getCheckboxesForCheckbox=function(t){return this._filterCells(e(e(t).closest("th")[0].cells))},s.prototype.init=function(){var t=this;this.$table.find(this.checkAllSelector).each(function(){e(this).is(t.checkboxSelector)?t.addCheckboxEvents(this):t.addButtonEvents(this)})},s.prototype.addButtonEvents=function(a){var s=this;e(a).on("click",function(a){a.preventDefault();var n,i=s.getCheckboxesForButton(this),o=!0;i.each(function(){this.checked||(o=!1)}),n=!!e(this).is(s.forceCheckedSelector)||!e(this).is(s.forceUncheckedSelector)&&!o,i.each(function(){this.checked=n,e(this).trigger("change."+t)})})},s.prototype.addCheckboxEvents=function(a){var s=this;e(a).on("change",function(){var e=this.checked;s.getCheckboxesForCheckbox(this).each(function(){this.checked=e})});var n=s.getCheckboxesForCheckbox(a);n.on("change."+t,function(){var e=0;n.each(function(){this.checked&&e++});var t=e===n.length;a.checked=t,a.indeterminate=0!==e&&!t})},e(a).on(T.events.create,function(e,t){new s(t)}),T.CheckAll=s}(),T});